В возможном решении данные о крепости собираются на основе таблицы Fortresses, а также нескольких функций JSON_OBJECT 
и JSON_ARRAYAGG. Для каждого из параметров в задаче (id гнома, ресурсов, построенных мастерских и военных отрядов) 
выполняется подзапрос к соответствующей таблице (id гнома - dwarves, ресурсов - fortress_resources, построенных мастерских - workshops,
военных отрядов - military_squads). Каждый такой подзапрос использует агрегирующую функцию JSON_ARRAYAGG, которая 
формирует JSON-массив значений, связанных с данной крепостью на основе id крепости. Затем все эти параметры преобразуются 
в один json объект с помощью функции JSON_OBJECT. В итоге получаем JSON для всех крепостей каждая из которых представлена 
как строка с ключевыми характеристиками и вложенным JSON-объектом - id крепости, название, местонахождение, 
год создания, и вложенный JSON-объект с массивами связанных сущностей.  

Также, насколько понимаю, такую задачу можно выполнить применением нескольких операций JOIN последовательно с каждой из 
нужных таблиц, но в таком случа промежуточные таблицы бы получались больших размеров, сам запрос был бы сложнее и их 
него трудно было бы сформировать нужный JSON.

При анализе задания и решения ознакомился с работой функций JSON_OBJECT и JSON_ARRAYAGG. Удобный функционал для формирования 
JSON с нужными параметрами средствами сервера БД, разгружая бэкенд от лишних операций.